general utility function for handling data and arrays of data